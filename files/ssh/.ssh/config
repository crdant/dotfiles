HashKnownHosts yes

Host exit.crdant.net
  User arceus
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
  IdentityFile ~/.ssh/id_router.pub

Host router
  User arceus
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
  IdentityFile ~/.ssh/id_router.pub
  CanonicalizeHostName yes
  CanonicalDomains lab.shortrib.net crdant.io.beta.tailscale.net

Host unifi.crdant.net
  User root
  PasswordAuthentication yes
  HostKeyAlgorithms +ssh-rsa
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
  IdentityFile ~/.ssh/id_unifi.pub

Host 10.13.6.204 bridge.things.crdant.net homebridge.things.crdant.net
  User pi

Host rye.lab.shortrib.net bourbon.lab.shortrib.net scotch.lab.shortrib.net potstill.lab.shortrib.net shine.lab.shortrib.net malt.lab.shortrib.net vcenter.lab.shortrib.net
  User root
  IdentityFile ~/.ssh/id_homelab

Host platform.shortrib.dev
  User Administrator

Host storage.lab.shortrib.net
  User arceus

Host gitlab.com
  IdentityFile ~/.ssh/id_rsa_gitlab.com

Host ssh.dev.azure.com
  IdentityAgent "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock" 
  IdentityFile ~/.ssh/id_azure-devops.pub
  
Host *
  User crdant
  ControlMaster auto
  ControlPath ~/.ssh/master-%r@%h:%p
  PasswordAuthentication no
  IgnoreUnknown UseKeychain
  UseKeychain yes

Match exec "[[ $(uname) == 'Darwin' ]]" host jumpbox
  CanonicalizeHostName yes
  CanonicalDomains walrus-shark.ts.net lab.shortrib.net 
  StreamLocalBindUnlink yes
  RemoteForward /run/user/1001/gnupg/S.gpg-agent %d/.gnupg/S.gpg-agent
  RemoteForward /run/user/1001/gnupg/S.gpg-agent.ssh %d/.gnupg/S.gpg-agent.ssh

Match exec "[[ $(uname) == 'Darwin' ]]" host fullscreen
  RemoteCommand tmux new -A -s fullscreen
  RequestTTY Yes
  HostName jumpbox
  CanonicalizeHostName yes
  CanonicalDomains walrus-shark.ts.net lab.shortrib.net 
  StreamLocalBindUnlink yes
  RemoteForward /run/user/1001/gnupg/S.gpg-agent %d/..gnupg/S.gpg-agent.extra 
  RemoteForward /run/user/1001/gnupg/S.gpg-agent.ssh %d/.gnupg/S.gpg-agent.ssh

Match exec "[[ $(uname) == 'Darwin' ]]" host window
  RemoteCommand source ~/.zshrc && window
  RequestTTY Yes
  HostName jumpbox
  CanonicalizeHostName yes
  CanonicalDomains walrus-shark.ts.net lab.shortrib.net 
  StreamLocalBindUnlink yes
  RemoteForward /run/user/1001/gnupg/S.gpg-agent %d/.gnupg/S.gpg-agent.extra 
  RemoteForward /run/user/1001/gnupg/S.gpg-agent.ssh %d/.gnupg/S.gpg-agent.ssh
